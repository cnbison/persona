# AGENTS

> 协作说明与项目约定（Persona 方向）

## 1. 项目定位与术语

- **说者Persona**：默认作者Persona，可扩展讲解者/教师Persona。
- **受众Persona**：受众画像与表达适配规则（分级讲解/改写）。
- **证据库**：观点-原文-上下文的可追溯证据链。
- **阶段输出**：`canonical`（原文要点）/`plan`（结构与适配计划）/`final`（成稿）。

## 2. 产品原则（必须遵守）

- **参数是表层，证据是底层**：任何参数化调整不得突破证据与边界约束。
- **可解释优先**：输出需包含阶段结果与诊断提示。
- **受众适配优先**：同一内容多版本输出为核心交付形式。
- **资产化管理**：Persona需可版本化、可导出/导入、可追溯。

## 3. 文档与同步规则

- PRD 以 `PRD-Persona.md` 为主。
- 架构与实现说明同步到 `ARCHITECTURE.md`。
- 任务规划以 `TASKS.md` 为准；检查验收以 `CHECKLIST.md` 为准。
- `PROGRESS*.md` 为历史记录，已归档到 `docs/history/`。
- `legacy-src` 已归档到 `docs/history/legacy-src/`，不再作为现行代码入口。
- 竞品参考以 `COMPETITIVE_ANALYSIS.md` 为准。

## 4. 输出规范

- **阶段输出**：每次生成提供 `canonical` / `plan` / `final`。
- **诊断提示**：术语过密、抽象过高、风格冲突、偏离证据需提示。
- **锁定机制**：对“概念/事实锁定”的内容禁止改写。
- **差异对比**：需要支持受众版本/Persona版本/参数版本 Diff。

## 5. 任务优先级与节奏

- P0：证据库、说者Persona、受众Persona适配。
- P1：阶段输出、诊断与可视化、Diff对比。
- P2：多音色音频、复杂协作流程。

## 6. 技术约定

- 默认本地优先（Tauri + FastAPI + SQLite）。
- 输出与配置优先 JSON 结构化，便于版本控制。

## 7. 变更流程

- 任何重大方向调整，先更新 `PRD-Persona.md`。
- 结构性改动同步 `README.md` 与 `ARCHITECTURE.md`。
- 有新增目录/模块时更新 `TASKS.md` 与本文件。

## 8. 协作指令模板

用于快速对齐需求、范围、验收与风险的统一格式。

```text
需求名称：
目标与背景：
范围（包含/不包含）：
依赖与假设：
输入/输出：
关键流程：
验收标准（可量化）：
风险与兜底：
文档同步（需要更新的文件）：
```
