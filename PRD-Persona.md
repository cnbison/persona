# Persona生成与应用产品需求文档（PRD）

## 一、文档基础信息

|项目|内容|
|---|---|
|文档版本|V1.0（Persona主定位）|
|需求来源|Persona生成与应用平台产品愿景|
|核心目标|以“说者Persona（默认作者Persona，可扩展讲解者/教师Persona）”为核心资产，构建可解释、可验证、可复用的Persona体系；引入受众Persona驱动表达适配（分级讲解/改写）；文档解析、提纲生成、对话生成作为Persona的实践与验证路径；后续扩展到多音色可选的播客/课程音频生成|
|适用范围|产品研发、AI模型训练、内容运营团队|
|迭代周期|第一阶段 30 个工作日（MVP）|

## 二、需求背景与核心价值

### 2.1 需求背景

经典著作与教学课本往往有较高的理解门槛与强体系化特征，用户难以进入语境与思路。通过AI构建“说者Persona”，让说者被“活化”，并以更可理解的方式“活化文档内容”，从而降低理解成本、提升记忆与应用效果。

### 2.2 核心价值

- **对用户**：获得高一致性、可解释、可追溯的说者Persona（作者Persona为主），并可按受众Persona输出不同层级的讲解/改写版本，用于理解、学习与应用。
- **对产品**：Persona作为核心资产，沉淀可复用的模型/配置与可验证流程。
- **对运营**：以Persona为中心组织内容与受众适配模板，支持规模化生产与分发，降低单场景开发成本。

## 三、产品核心概念

### 3.1 Persona资产定义

- **Persona画像**：以证据为中心的“可解释画像”，维度是可配置的，不固化为唯一标准。
- **默认六维度（可调整）**：立场与主张、概念框架、论证方式、叙事风格、语气与节奏、人格气质。
- **说者Persona**：默认以原著作者为说者；教学场景可扩展为讲解者/教师Persona（可选）。
- **Persona卡片**：面向阅读与校准的一页式档案（摘要、维度、代表性原文/例句、边界规则、证据链接）。
- **Persona证据库**：与原文片段、章节、论证链路对应的可追溯证据。
- **Persona执行配置**：System Prompt、风格参数、边界与约束规则。

### 3.2 受众Persona与内容适配

内容传播包含“说者Persona（作者/讲解者）”与“受众Persona（接受者）”两部分。受众Persona用于指导表达方式与难度控制，同一内容在不同受众画像下应表现为不同的讲解方式、术语密度与案例选择。

**受众Persona维度（示例）**：
- 年龄段/教育阶段（小学、初中、高中、大学、成人）
- 先验知识水平（入门/基础/进阶/专家）
- 认知偏好（故事驱动/逻辑推导/案例驱动）
- 语言风格偏好（简洁/严谨/比喻型）

**受众Persona分级建议（教育阶段）**：
- 小学：概念化弱、依赖具象类比与故事引导
- 初中：可接受基础概念与简单因果链
- 高中：可接受抽象概念与结构化推导
- 大学：可接受体系化框架、术语与背景知识
- 成人/专业：可接受专业术语、理论争议与多视角讨论

**表达层级控制维度**：
- 术语密度
- 句长与从句复杂度
- 抽象程度
- 案例复杂度与生活贴近度
- 论证深度（结论优先 vs 推导优先）

**表达层级模板示例（同一内容）**：
- 小学：以故事/比喻引入，避免术语，结论先行
- 初中：引入基础概念，少量术语，配合生活例子
- 高中：给出结构化定义，加入简要推导与对比
- 大学：使用正式术语与框架，强调逻辑链路与边界
- 成人/专业：支持多视角、反例与争议点讨论

**示例（同一知识点分级表达：惯性）**：
- 小学：用“坐公交车刹车会往前冲”类比，强调“东西喜欢保持原样”。
- 初中：给出“物体保持原来运动状态”的定义，并解释“外力才会改变”。
- 高中：用更严格的表述（惯性定律/参考系）并加入常见误区对比。
- 大学：强调惯性系、与动量/力学体系的关系，给出更精确边界。
- 成人/专业：增加反例、争议点或应用场景（工程/科研语境），并给出可验证条件。

**受众Persona字段模型（建议）**：
- `id`：唯一标识
- `label`：受众名称（如“高中生-理科”）
- `education_stage`：教育阶段
- `prior_knowledge`：先验知识水平
- `cognitive_preference`：认知偏好
- `language_preference`：语言风格偏好
- `tone_preference`：语气偏好
- `term_density`：术语密度目标
- `sentence_length`：句长目标
- `abstraction_level`：抽象程度
- `example_complexity`：案例复杂度
- `proof_depth`：论证深度偏好
- `constraints`：硬性限制（禁用术语、避免符号等）

**同一内容多版本输出流程（建议）**：
1. 选择说者Persona + 受众Persona
2. 生成“目标表达约束清单”（术语密度、句长、案例复杂度等）
3. 输出多版本内容（按受众Persona）
4. 生成适配评估报告（可读性/理解题/术语覆盖度）
5. 支持人工微调并回写受众Persona参数

**参数化维度与受众Persona控制映射（参考 style-generator 思路）**：
- 结构（structure）→ 论证与内容组织方式（结论优先/推导优先/分点展开）
- 感知（perception）→ 具象化程度与感知描述（抽象到具象）
- 意义（meaning）→ 概念解释深度与价值阐释密度
- 分布（distribution）→ 信息密度与节奏分布（短句/长句、信息峰值）
- 语言皮肤（sentence length / abstraction / emotion）→ 句长、抽象度、情感强度

### 3.3 Persona验证路径（实践与验证）

- **文本实践**：提纲生成、对话生成、写作重述等作为一致性验证。
- **可追溯验证**：观点必须能关联到证据库；偏离触发校准。
- **一致性验证**：跨场景输出保持角色一致性与风格稳定。

### 3.4 未来扩展方向

- **多音色播客音频生成**：将Persona输出扩展为音频角色，支持多音色/语气风格选择。
- **多场景应用**：课程讲解、专题对谈、内容改写、研究辅助等。

### 3.5 MVP范围界定（建议）

**MVP范围（做）**：
- 文本输入与结构化（经典著作/教材/讲义的章节与知识点）
- 说者Persona构建：证据库、画像、边界规则、System Prompt、Persona卡片、导出/导入
- 受众Persona适配：分级讲解/改写、多版本输出、阶段输出（canonical/plan/final）、基础诊断与评估
- 验证任务：提纲生成、对话生成、写作重述（用于一致性与可用性验证）

**非MVP范围（先不做或弱化）**：
- 音频生成与多音色（作为后续P2能力）
- 大规模热点抓取与播客节目生产流水线（作为应用场景扩展）
- 复杂的多人协作工作流（先以导出/导入+版本化满足基础协作）

## 四、核心功能需求（按模块划分）

### 模块一：著作文件内容处理（Persona证据基础层，优先级：P0）

#### 4.1.1 著作文件预处理

|需求点|优先级|需求描述|验收标准|
|---|---|---|---|
|多格式兼容解析|P0|支持PDF、EPUB、TXT、DOCX等主流格式，自动输出标准化文本。|1. 解析成功率≥98%；2. 结构化文本无明显错序。|
|冗余信息过滤|P0|剔除页码、版权声明、无关批注等噪音，保留正文与关键注释。|1. 冗余剔除准确率≥95%；2. 正文保留完整度100%。|
|版本校验与溯源|P1|支持版本差异标注与溯源，优先权威版本作为Persona证据。|1. 可记录版本来源；2. 支持对差异段落标注。|

#### 4.1.2 内容结构化解析

|需求点|优先级|需求描述|验收标准|
|---|---|---|---|
|章节逻辑拆解|P0|建立“章节-段落-观点”索引结构，支持原文定位。|1. 索引完整性≥90%；2. 原文定位≤1秒。|
|核心观点锚定|P0|提取核心观点并绑定原文片段与上下文。|1. 观点提取准确率≥92%；2. 每个观点均有证据链。|
|Persona证据库构建|P0|将观点、原文片段、章节与论证链路形成证据库，用于Persona一致性验证。|1. 证据库可检索；2. 证据覆盖≥90%。|

### 模块二：说者Persona构建（核心能力层，优先级：P0）

> 默认以作者Persona为目标；教学场景可扩展讲解者/教师Persona（可选）。

#### 4.2.1 Persona画像构建

|需求点|优先级|需求描述|验收标准|
|---|---|---|---|
|立场与主张建模|P0|抽取核心立场与主张，形成可验证的观点边界。|1. 立场识别准确率≥92%；2. 边界规则可解释。|
|概念框架构建|P0|建立核心概念、术语与其层级关系。|1. 概念覆盖度≥95%；2. 结构一致性≥90%。|
|论证方式还原|P0|识别常用论证路径与推理习惯（归纳/演绎/对比/辩证等）。|1. 识别准确率≥85%；2. 逻辑还原度≥90%。|
|叙事风格复刻|P0|复刻语言节奏、句式结构与修辞偏好。|1. 风格还原度≥88%；2. 跨场景稳定性≥90%。|
|语气与人格气质|P0|模拟语气强度与人格气质，保证人格一致性。|1. 语气还原度≥85%；2. 跨输出一致性≥95%。|

#### 4.2.2 Persona执行配置

|需求点|优先级|需求描述|验收标准|
|---|---|---|---|
|System Prompt生成|P0|自动生成包含“默认六维度（或自定义维度）”、边界与风格规则的Persona指令集，并支持导出。|1. 覆盖默认六维度或自定义维度；2. 指令清晰无歧义；3. 支持导出为结构化配置（JSON）。|
|观点边界约束|P0|设定不可突破观点清单与推演标注规则。|1. 无违背核心主张；2. 推演标注清晰。|
|原文锚定机制|P0|Persona输出中的关键观点/事实需匹配证据库；推演内容需标注并给出依据段落；不匹配则触发校验与修正。|1. 关键观点/事实证据匹配率100%；2. 推演标注清晰；3. 修正响应≤1秒（本地校验）。|

#### 4.2.3 Persona资产管理与版本化

|需求点|优先级|需求描述|验收标准|
|---|---|---|---|
|Persona卡片生成|P0|生成一页式Persona卡片（摘要、维度、代表性原文/例句、边界规则、证据链接）。|1. 卡片内容可编辑；2. 关键条目可点回证据库。|
|版本管理与对比|P1|支持Persona版本化（草稿/发布）、差异对比与回滚。|1. 支持版本回溯；2. 支持对比视图（Diff）。|
|配置导出/导入|P0|支持Persona与受众Persona配置导出/导入（JSON），便于团队协作与版本控制。|1. 导出可复用；2. 导入后生成结果一致。|
|示例库（Do/Don't）|P1|生成代表性表达示例（推荐/禁用）与Before/After对照，用于风格校准。|1. 示例与证据关联；2. 可用于回归测试样例集。|

### 模块三：Persona验证与应用（实践验证层，优先级：P0）

> 该模块用于验证Persona的稳定性与可用性，同时为后续应用场景提供产出。

#### 4.3.1 提纲生成（验证路径之一）

|需求点|优先级|需求描述|验收标准|
|---|---|---|---|
|章节映射提纲|P0|基于Persona与章节结构生成可解释的提纲。|1. 覆盖核心观点≥90%；2. 逻辑递进合理。|
|可调试与对比|P1|支持多版本提纲对比，以验证Persona一致性。|1. 支持版本回溯；2. 变更可追踪。|

#### 4.3.2 对话生成（验证路径之一）

|需求点|优先级|需求描述|验收标准|
|---|---|---|---|
|Persona对话脚本|P0|基于Persona生成对话，用于验证风格与观点一致性。|1. 观点准确率100%；2. 风格还原度≥88%。|
|多轮一致性校验|P0|跨轮次检测语气、价值观、论证方式一致性。|1. 一致性≥95%；2. 异常可定位。|

#### 4.3.3 风格参数化参考（借鉴 style-generator 思路）

|需求点|优先级|需求描述|验收标准|
|---|---|---|---|
|Persona风格参数化|P1|引入结构、感知、意义、分布等风格参数，用于Persona输出的可控性。|1. 参数可视化；2. 参数变化可解释。|
|语言皮肤调节|P1|支持句长、抽象度、情感强度调节。|1. 调节后风格变化可感知；2. 不破坏Persona核心边界。|

#### 4.3.4 受众Persona驱动的表达适配

|需求点|优先级|需求描述|验收标准|
|---|---|---|---|
|受众Persona建模|P0|为不同受众建立画像，用于驱动表达方式与难度控制。|1. 至少覆盖小学/初中/高中/大学/成人五类画像；2. 画像可编辑与复用。|
|表达层级适配|P0|同一内容依据受众Persona输出不同表达（术语密度、句长、案例复杂度）。|1. 输出可被目标受众理解（可用测评）；2. 不改变核心观点。|
|概念/事实锁定|P0|支持用户指定“不可改写”的事实、概念定义、公式或关键句，受众适配时必须保持一致。|1. 锁定内容保持一致；2. 若与受众约束冲突可提示并给出替代方案。|
|受众一致性校验|P1|检测输出是否符合目标受众难度与风格要求。|1. 偏离可提示并修正；2. 可生成适配报告。|
|适配评估方法|P1|建立受众适配评估方法（理解题、可读性评分、术语覆盖度）。|1. 有可执行评估流程；2. 可生成评分与改进建议。|

**受众适配引擎建议实现（参考 style-generator 机制）**：
1. **段落/句子切分**：将原文按段落或句子拆分为最小可控单元。
2. **结构角色分配**：为每段/句分配角色（开场/展开/转折/结尾），用于控制节奏。
3. **参数偏置**：根据受众Persona与内容类型，对表达参数做“角色偏置”：
   - 开场：提高结构与清晰度
   - 展开：提高感知与案例密度
   - 转折：提高意义与概念解释
   - 结尾：提高总结性与传播性
4. **适配输出**：按偏置后的参数生成多版本文本。
5. **诊断提示**：当多种风格竞争过强时提示“风格冲突”，建议调整参数。
6. **可视化**：输出“风格热力图”，展示每段/句的风格分布与偏置结果。

#### 4.3.5 阶段输出与诊断（可解释性）

|需求点|优先级|需求描述|验收标准|
|---|---|---|---|
|阶段输出|P0|每次生成提供三阶段产出：canonical（原文要点/不改写）、plan（结构与适配计划）、final（成稿）。|1. 三阶段均可查看与导出；2. plan可解释每段策略。|
|多版本对比|P1|支持不同受众版本/不同参数版本/不同Persona版本之间的对比（Diff）。|1. diff可读且按段落对齐；2. 可定位差异原因（受众约束/参数变化）。|
|诊断提示|P1|生成“术语过密/抽象过高/风格冲突/偏离证据”等诊断提示，并给出调整建议。|1. 提示可行动；2. 可链接到对应参数或证据。|
|热力图可视化|P1|展示风格分布热力图（按段/句粒度），帮助调试受众适配。|1. 支持切换粒度；2. 可导出截图或数据。|

### 模块四：内容审核与一致性保障（质量保障层，优先级：P1）

|需求点|优先级|需求描述|验收标准|
|---|---|---|---|
|观点准确性审核|P0|检测Persona输出与证据库匹配度，标注偏差。|1. 偏差识别率≥95%；2. 修正建议准确率≥90%。|
|敏感内容审核|P0|敏感内容拦截与提示。|1. 拦截率100%；2. 误判率≤5%。|
|一致性巡检|P1|跨输出、跨场景的一致性巡检与报告。|1. 巡检可追溯；2. 报告可读。|

### 模块五：多模态与音频扩展（未来方向，优先级：P2）

|需求点|优先级|需求描述|验收标准|
|---|---|---|---|
|多音色播客生成|P2|Persona输出扩展为多音色可选的播客音频生成。|1. 支持多音色；2. 语气与Persona一致。|
|脚本到音频流水线|P2|文本脚本与Persona参数驱动的音频生成流程。|1. 转换成功率≥95%；2. 生成时长可控。|

## 五、非功能需求

- **性能需求**：
  - Persona生成响应时间≤2分钟/说者Persona（MVP）
  - Persona验证输出≤10分钟/任务

- **兼容性需求**：
  - 兼容主流文档格式输入
  - 兼容主流AI模型（OpenAI/Claude/国内模型）

- **安全性需求**：
  - 原文使用符合版权规范，仅用于理解与分析
  - 内容生成需经过敏感词与价值观审核

- **可扩展性需求**：
  - Persona资产支持多场景复用
  - 支持多语言与多模态扩展

- **可维护性需求**：
  - Persona/受众Persona配置支持导出为JSON并可导入恢复，便于版本控制与团队协作
  - 关键生成过程可追溯（记录输入、配置、版本、评估结果与证据引用）

- **可用性需求**：
  - 生成过程支持阶段输出与对比（canonical/plan/final、Diff、诊断提示）
  - 支持模板/预设与快速校准，降低教师/运营使用门槛

## 六、数据流与系统架构（Persona视角）

```
著作文件上传 → 格式解析与清洗 → 内容结构化提取 → Persona证据库 → Persona画像构建（说者Persona + 受众Persona） → Persona执行配置 → 受众适配输出 → 审核与一致性修正
```

**架构原则：参数是表层，证据是底层**  
- 表层参数用于“表达控制”（受众适配与风格调节），提升可控性与可调试性。  
- 底层证据库与边界规则用于“人格一致性与真实性”，保证输出可追溯。  
- 任何参数化调整不得突破证据与边界约束。  

## 七、开发计划与里程碑（MVP）

**第一阶段：Persona证据基础（1-10天）**
- 文档解析与结构化
- 证据库构建

**第二阶段：Persona画像构建（11-20天）**
- 画像维度建模（默认六维度，可扩展）
- System Prompt生成
- 边界与锚定机制

**第三阶段：验证与应用（21-30天）**
- 提纲/对话验证流程
- 一致性检查与报告

## 八、风险与应对措施

|风险点|影响程度|概率|应对措施|
|---|---|---|---|
|Persona一致性不足|高|中|加强证据库覆盖与锚定机制，建立一致性巡检|
|证据不足导致虚构|高|中|要求所有输出可追溯，缺证据则拒答|
|模型成本过高|中|中|优化prompt与缓存，分层模型调用|
|受众适配过度简化导致失真|中|中|启用概念/事实锁定与证据锚定；引入适配评估与人工抽检|
|版权/授权风险（经典/教材）|高|中|优先公版或授权内容；输出以讲解/改写为主，避免原文大段复刻；提供来源与引用规范|
|评估指标与自动巡检不可靠|中|中|建立基准样例集与回归测试；人机结合抽检；持续校准阈值与提示策略|

## 九、成功指标（KPI）

- **Persona一致性**：跨场景一致性≥95%
- **证据可追溯**：关键观点/事实证据匹配率100%
- **Persona还原度**：专家评分≥85分
- **验证输出质量**：提纲/对话质量评分≥85分
- **受众适配度**：目标受众理解度≥85%

## 十、竞品与借鉴

> 本章节聚焦“可借鉴能力”，并明确与本项目的差异化方向。

### 10.1 竞品类型与可借鉴能力

**说者风格/品牌声音类**（强调风格资产化与复用）  
- 代表能力：风格规则化、样例驱动、可编辑与可导出、多Persona并存与切换  
- 可借鉴点：把“说者风格”沉淀为可复用配置，形成稳定的表达规范

**受众适配/分级改写类**（强调同一内容多版本输出）  
- 代表能力：多阅读等级输出、保持核心意义不变、可编辑与教学场景可控  
- 可借鉴点：以“受众Persona”为驱动生成多版本内容，并提供适配评估

**教学内容生成/教材适配类**（强调内容结构可变与版本化）  
- 代表能力：结构化、删改与重组、版本化、多情境教学适配  
- 可借鉴点：围绕“章节/知识点”做版本化内容工程，提升课堂/自学可用性

**音频/听读类**（为多模态扩展做准备）  
- 代表能力：文本到音频、语音角色与可选音色、听读体验优化  
- 可借鉴点：为后续“多音色播客/课程音频生成”提供落地参考路径

> 更完整的竞品清单、来源链接与能力矩阵，见 `COMPETITIVE_ANALYSIS.md`。

### 10.2 可借鉴的交互流程（UX模式）

- **样例/原文输入 → 生成风格/等级描述 → 输出多版本 → 编辑与导出**  
- **多版本对比与回写**：允许用户校准参数并沉淀为可复用模板  
- **适配可解释**：提供“为什么这样改”的提示与可视化（如风格热力图）

### 10.3 与本项目的差异化空间

- **说者Persona证据锚定**（作者Persona为主）：输出必须可追溯至原文证据库  
- **双Persona耦合**：说者Persona + 受众Persona同时驱动输出  
- **经典/教材活化**：不止改写难度，还要保留作者思想与风格一致性

### 10.4 借鉴落地到PRD模块的映射

- **Persona画像/风格执行**：借鉴“风格规则化、可导出配置”  
- **受众Persona适配**：借鉴“多版本输出、分级可控、可编辑校准”  
- **一致性与可追溯**：强化“证据库+边界约束”优先于参数化

## 十一、附录

### 11.1 备注

- `style-generator/` 为独立参考工程，主项目可借鉴其参数化思路与可视化交互，但不修改其代码与文件。

